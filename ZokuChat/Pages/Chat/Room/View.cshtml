@page
@model ViewModel
@{
	ViewData["Title"] = "View Room";
}

@using ZokuChat.Helpers
@using ZokuChat.Models
@using ZokuChat.Services
@inject Context Context
@inject IUserService UserService

<partial name="_SiteHeader" />
<div class="content-container">
	<partial name="_ChatSidebar" />
	<div class="content">
		<h3>Rooms</h3>
		<div class="form-group">
			<label for="name">Name</label>
			<div id="name">
				@Model.Room.Name
			</div>
		</div>
		<div class="form-group">
			<label for="description">Description</label>
			<div id="description">
				@Model.Room.Description
			</div>
		</div>
		<div class="form-group">
			<label for="contacts">Contacts</label>
			<div id="contacts" style="width: 500px; display: flex; flex-direction: row;">
				<div class="room-creator margin-right margin-bottom">
					@UserService.GetUserNameByUID(Model.Room.CreatedUID)
				</div>
				@foreach (RoomContact contact in Model.Room.Contacts)
				{
					<div class="room-contact margin-right margin-bottom">
						@UserService.GetUserNameByUID(contact.ContactUID)
					</div>
				}
			</div>
		</div>
		<a href="@UrlHelper.GetRoomsUrl()" class="btn btn-primary margin-right">Rooms List</a>
		@if (RoomPermissionHelper.CanDeleteRoom(Context.CurrentUser, Model.Room))
		{
			<button class="btn btn-danger" onclick="window.ZokuChat.DeleteRoom(@Model.Room.Id);">Delete</button>
		}
	</div>
</div>